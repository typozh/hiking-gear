<div class="page-header">
  <h1>ðŸ“¥ Import Gear Items</h1>
</div>

<div class="form-container" style="max-width: 600px; margin: 0 auto;">
  <div class="card">
    <h2>Upload Your File</h2>
    
    <p>Import multiple gear items at once from a CSV or Excel file.</p>
    
    <div class="info-box" style="background: #e3f2fd; padding: 1rem; border-radius: 8px; margin: 1.5rem 0;">
      <h3 style="margin-top: 0;">ðŸ“‹ Supported Formats</h3>
      <ul style="margin-bottom: 0;">
        <li><strong>CSV</strong> (.csv)</li>
        <li><strong>Excel</strong> (.xlsx, .xls)</li>
      </ul>
    </div>

    <div class="info-box" style="background: #fff3e0; padding: 1rem; border-radius: 8px; margin: 1.5rem 0;">
      <h3 style="margin-top: 0;">ðŸ’¡ Tips</h3>
      <ul style="margin-bottom: 0;">
        <li>Your file should have column headers in the first row</li>
        <li>At minimum, include a column for the gear name</li>
        <li>Optional columns: brand, model, weight, notes, category</li>
        <li>You'll be able to map your columns to gear fields on the next step</li>
        <li>Weight should be in kilograms (e.g., 0.5 for 500g)</li>
      </ul>
    </div>

    <%= form_with url: gear_imports_path, method: :post, multipart: true, local: true do |f| %>
      <div class="form-group">
        <%= f.label :file, "Select File", class: "form-label" %>
        <%= f.file_field :file, accept: ".csv,.xls,.xlsx", required: true, class: "form-control" %>
      </div>

      <div class="form-actions">
        <%= f.submit "Upload and Continue", class: "btn-primary" %>
        <%= link_to "Cancel", gear_items_path, class: "btn-secondary" %>
      </div>
    <% end %>
  </div>

  <div style="margin-top: 2rem; text-align: center;">
    <p>Need a template? <%= link_to "Download sample CSV", "#", onclick: "downloadSampleCSV(); return false;", style: "color: #2196F3;" %></p>
  </div>
</div>

<script>
function downloadSampleCSV() {
  const csv = "Name,Brand,Model,Weight (kg),Category,Notes\n" +
              "Tent,MSR,Hubba Hubba NX,1.54,Shelter,2-person tent\n" +
              "Sleeping Bag,Western Mountaineering,UltraLite,0.85,Sleep System,20Â°F rated\n" +
              "Backpack,Osprey,Exos 58,1.15,Pack,58L capacity\n" +
              "Water Filter,Sawyer,Squeeze,0.09,Water,Filters 100000 gallons";
  
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'gear_import_sample.csv';
  a.click();
  window.URL.revokeObjectURL(url);
}
</script>

<style>
.form-container .card {
  background: white;
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: #333;
}

.form-control {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 1rem;
}

.form-control:focus {
  outline: none;
  border-color: #2196F3;
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
}

.form-actions {
  display: flex;
  gap: 1rem;
  margin-top: 2rem;
}

.info-box h3 {
  font-size: 1rem;
  margin-bottom: 0.5rem;
}

.info-box ul {
  padding-left: 1.5rem;
}

.info-box li {
  margin: 0.25rem 0;
}
</style>
